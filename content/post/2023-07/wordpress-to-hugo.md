---
title: 【SSG】WordPressブログをHugo（AWS）に移行した
description: この度、レンタルサーバーへ立てたWordPressのブログをSSGである**Hugo**に乗り換え、ホスティングもAWS S3・CloudFrontに変更しましたので、移行の理由や感想等を書いていきます。
date: 2023-07-16
categories: 
  - 技術記事
tags: 
  - ブログ運営
  - Hugo
  - AWS
  - GitHub
  - WordPress
archives: 
  - 2023/07
thumbnail: /images/hugo.webp
---

この度、レンタルサーバーへ立てた**WordPress**のブログをSSGである**Hugo**に乗り換え、ホスティングも**AWS S3**・**CloudFront**に変更しましたので、移行の理由や感想等を書いていきます。

<!--more-->

## ブログの構成

まず、当ブログの構成についてですが、これまではレンタルサーバー（ロリポップ）にWordPressをインストールし、ドメイン取得サービス（ムームドメイン）で取得した独自ドメイン`dimzakki.com`でサイトを運営していました。

{{< luminous src="/images/wordpress-to-hugo-01.png" caption="WordPress + レンタルサーバーの構成">}}

レンタルサーバー + WordPressのサイト構成では、あくまで趣味としてのブログ運営であることから、なるべく低コストで運営することを重視していました。サーバーは一番安いプランにし、ドメインはロリポップの無料キャンペーン取得したものを維持してきました。ですので、運営で掛かっていた費用は**年間6,000円未満のサーバー代のみ**でした。

安いプランを契約していると、サーバーが貧弱なのでサイトスピードがあまり出ません。その為なるべく重くならないようブログ内容も装飾を抑え、シンプルな内容にしてきました。

今回、ブログの構成を一新し、レンタルサーバーメインの構成から、**AWS**メインの物へと移行することにしました。記事内容を静的サイトジェネレータ（SSG）である**Hugo**に移行して**Github**上で管理し、サイトを**AWS S3**でホスティングを行っています。また、SSL対応やパフォーマンス向上の為**CloudFront**をキャッシュサーバーとしています。ドメインも**Amazon Route 53**へ移管しました。

ブログ更新時のS3へのデプロイはGitHub Actionsで自動的に行っています。

{{< luminous src="/images/wordpress-to-hugo-02.png" caption="Hugo + AWS構成">}}

## SSGについて

**SSG**とは、Static Site Generator（静的サイトジェネレーター）の略で、文字通り静的なHTMLを生成するツールのことです。静的であるため、アクセスしたユーザーには常に同じ内容が表示されます。

反対に、WordPressは動的サイトに分類され、アクセスしたユーザー毎に自動でページ生成されて表示されます。

HugoはGo言語で実装されており、ビルドの掛かる時間が高速であることが大きな特徴です。また、ブログ用のテンプレートが豊富にあることもメリットの1つですね。

有名なSSGは、Hugoの他にGatsbyやJekyllなどがあります。

## Hugoの利点・欠点

まずは、この構成からAWS + Hugoへ移行するにあたっての、WordPressとのメリット・デメリットをまとめてみます。

### メリット

* サイトスピードに優れる

Hugoは静的サイトジェネレーターであり、HTMLを公開しているだけなので**表示速度に優れている**のが特徴です。対して、WordPressはリクエスト毎にPHPでデータベースにアクセスしてページを生成しているため、どうしても重くなってしまいます。

* セキュリティリスクが少ない

WordPressでは管理ツールでサイトの管理を行うので、不正アクセスなどの**セキュリティリスク**が付きまといます。また、プラグインも様々な開発元が制作していますので、脆弱性が発生する可能性があります。静的サイトであるHugoはそのようなリスクはありません。

* コストパフォーマンスに優れる  

このサイト構成の場合に掛かる費用は、AWSでのRoute 53・S3・CloudFrontの利用代のみであり、個人のブログサイト程度ならレンタルサーバーと比較して**低コスト**で運営ができます。

* サーバー管理が必要ない

サーバーやDBを管理する必要もありません。他にも、サイトの内容についてはGitHubのリポジトリにファイルを置くことで、WordPressより低コストでバージョン管理が可能です。

### デメリット

* サイト構築の難易度がWordPressより高い

Hugoだけではなく、AWSやGitの基礎知識が必要なので、WordPressよりは若干ハードルが高いです。とは言え、一度構築さえしてしまえば記事の更新にはGitへのプッシュだけで簡単に行えます。

* 日本語の資料が少ない

ネット上のドキュメントの数は、WordPressに比べると圧倒的に少ないです。場合によっては、ある程度英語の資料も見ていく必要があります。

* 動的な機能が使えない

Hugo上で人気記事ランキング・お問い合わせフォーム・コメント機能の様な動的な機能を実装するのには、ある程度カスタマイズが必要になってきます。なお、最低限必要なお問い合わせフォームに関しては、こだわりが無ければGoogleフォームで簡単に実装が可能です。

## Hugoに移行した理由

今回、僕がHugoへ移行した一番の理由は、**コストを抑えつつサイトスピードを上げたかった**からです。

WordPressである程度の速度を得るには、それなりの性能のサーバーを使用する必要があり、結果費用が掛かるので赤字運営となってしまいます。

当ブログではWordPressで実現できる様な、複雑な機能などは特に必要としていなかったので、それなら静的サイトジェネレータでお安く速度を重視したサイトへ変えようと思った訳です。

Hugo + AWS構成を選択したのは、静的サイトジェネレータの中ではこの構成が比較的メジャーであり、ネット上の参考文献も他より多かったことも理由になりました。

また、AWSは仕事であまり使う機会が無いので、AWSへの知見を深めるのにも丁度良いタイミングだと思ったのも理由の1つになります。

## Hugoへの移行手順

以下に、手順の全てではありませんが、WordPressからHugoに移行した際のメモを備忘録としてまとめます。

1. レンタルサーバーのドメインをRoute 53に移管する
* {{< ref "/domain-to-route53" >}}

2. Hugoをローカルに構築してコンテンツを移す
* {{< ref "/develop-hugo" >}}

3. HugoをS3にデプロイし、CloudFrontで配信する
* {{< ref "/hugo-deploy" >}}

4. GitHubで自動デプロイを設定する
* {{< ref "/hugo-github" >}}

以上の4つのプロセスでサイトを運営することができました。

また、必須の機能ではありませんが、人気記事ランキングも実装してみました。

* {{< ref "/hugo-ranking" >}}

## 移行した感想

とりあえず、無事にHugo・AWSへサイトを移行できたので一安心です。ブログ自体もスピードがサクサクになりました。

手順の中で一番時間が掛かったのはコンテンツの移行でした。サイトの構築自体は参考文献が色々とありましたので、思ったよりスムーズに行きました。

運営コストについては、初月はドメイン代が掛かっているものの、以降の月は平均して1ヶ月で100円以下と非常に安く運用できています。

{{< luminous src="/images/wordpress-to-hugo-03.png" caption="8月のサイト運営コスト">}}

（移行した後にロリポップの自動更新を切るのを忘れていて、結局プラス1年サーバー代を払うことになったのはまた別の話…）

* * * 

以上がWordPressからHugoへの移行についての話になります。AWSの各種サービスも色々と触ることができましたので、良い勉強になったと思います。

今後もサイトの更新を進めていきたいと思います。以上で記事を終わりにします。